%This work is licensed under the
%Creative Commons Attribution-Share Alike 3.0 United States License.
%To view a copy of this license, visit
%http://creativecommons.org/licenses/by-sa/3.0/us/ or send a letter to
%Creative Commons,
%171 Second Street, Suite 300,
%San Francisco, California, 94105, USA.

\subsection{Writing Entropy Variables}
\label{wavpack:write_entropy}
\ALGORITHM{3 entropy variables per channel, channel count}{entropy variables sub block data}
\SetKwData{ENTROPY}{entropy}
\SetKwFunction{WVLOG}{wv\_log2}
$\WVLOG(\text{\ENTROPY}_{0~0}) \rightarrow$ \WRITE 16 signed bits\;
$\WVLOG(\text{\ENTROPY}_{0~1}) \rightarrow$ \WRITE 16 signed bits\;
$\WVLOG(\text{\ENTROPY}_{0~2}) \rightarrow$ \WRITE 16 signed bits\;
\If{$\text{channel count} = 2$}{
  $\WVLOG(\text{\ENTROPY}_{1~0}) \rightarrow$ \WRITE 16 signed bits\;
  $\WVLOG(\text{\ENTROPY}_{1~1}) \rightarrow$ \WRITE 16 signed bits\;
  $\WVLOG(\text{\ENTROPY}_{1~2}) \rightarrow$ \WRITE 16 signed bits\;
}
\Return entropy variables sub block data\;
\EALGORITHM

\begin{figure}[h]
  \includegraphics{wavpack/figures/entropy_vars.pdf}
\end{figure}
